### 小程序

#### 版本

* 开发版本
* 体验版本
* 审核中版本
* 线上版本

#### 开发流程

1. 开发者上传代码
2. 选择上传的代码作为体验版本，用于测试
3. 测试缺陷修复完成之后，再上传修复缺陷后的代码
4. 上传代码可以继续作为体验版本，用于测试
5. 测试没有缺陷后，提交上传代码审核
6. 审核通过后发布到线上，给真实用户使用

#### 代码构成（全局和页面）

1. .json配置文件
2. .wxml模板文件
3. .wxss样式文件
4. .js脚本逻辑文件

#### 应用周期函数

1. onLaunch:小程序初始化完成时触发，全局只触发一次
2. onShow:小程序启动，或从后台进入前台显示时触发。
3. onHide:小程序从前台进入后台时触发。
4. onError:小程序发生脚本错误或 API 调用报错时触发。
5. onPageNotFound:小程序要打开的页面不存在时触发。
6. onUnhandledRejection:小程序有未处理的 Promise 拒绝时触发。
7. onThemeChange:系统切换主题时触发。

#### 页面周期函数

1. onLoad生命周期回调—监听页面加载
2. onShow生命周期回调—监听页面显示
3. onReady生命周期回调—监听页面初次渲染完成
4. onHide生命周期回调—监听页面隐藏
5. onUnload生命周期回调—监听页面卸载

### Component 构造器和page的主要区别

方法需要放在 methods: { } 里面

#### 路由跳转

1. 页面栈

    - 初始化 —— 新页面入栈
    - 打开新页面 ——	新页面入栈
    - 页面重定向 —— 当前页面出栈，新页面入栈
    - 页面返回 —— 页面不断出栈，直到目标返回页
    - Tab 切换 —— 页面全部出栈，只留下新的 Tab 页面
    - 重加载 —— 页面全部出栈，只留下新的页面

2. 路由方式

    - 打开新页面
        - wx.navigateTo 
        - `<navigator open-type="navigateTo" />` 
    - 重定向
        - wx.redirectTo
        - `<navigator open-type="redirectTo">`
    - 页面返回
        - wx.navigateBack
        - `<navigator open-type="navigateBack">`
    - Tab切换
        - wx.switchTab
        - `<navigator open-type="switchTab" />`
    - 重启动(关闭所有页面，打开到应用内的某个页面)
        - wx.reLaunch
        - `<navigator open-type="reLaunch">`

#### 接口请求

1. 设置通讯域名

[设置通讯域名](https://mp.weixin.qq.com/wxamp/devprofile/get_profile?token=842053439&lang=zh_CN)

[接口请求api](https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html)


### 小程序登录

1. 小程序wx.login获取code。
2. 小程序wx.request发送code给开发者服务器。
3. 开发者服务器携带appid，appsecret，code发送给微信接口服务。
4. 微信接口服务返回session_key，openid给开发者服务器。
5. 服务器根据session_key，openid完成登录功能（标记用户的一次会话）

### UnionID

- 同一用户，对同一个微信开放平台下的不同应用，UnionID是相同的
- 调用接口 wx.getUserInfo，从解密数据中获取 UnionID，注意本接口需要用户授权

### 获取手机号

- 获取微信用户绑定的手机号，需先调用wx.login接口。
- 需要用户主动触发才能发起获取手机号接口，需用 button 组件的点击来触发。
- 需要将 button 组件 open-type 的值设置为 getPhoneNumber，当用户点击并同意之后，可以通过 bindgetphonenumber 事件回调获取到微信服务器返回的加密数据， 然后在第三方服务端结合 session_key 以及 app_id 进行解密获取手机号。
- 建议开发者提前进行 login；或者在回调中先使用 checkSession 进行登录态检查，避免 login 刷新登录态

### 获取用户信息
- 	wx.getUserInfo，需要用户授权

### 场景值（用户进入小程序的方式）

### behaviors

多个页面有相同的数据字段和方法

### 状态保持

### 表单校验？

### 弹窗？

### 小程序的生命周期?

### 组件间通信

- 属性（父向子）
- 事件triggerEvent（子向父）
- this.selectComponent子组件实例

### 数据监听

observers

### 抽象节点

对应vue里的component组件

### 纯数据字段

不影响渲染的数据

### 使用扩展
definitionFilter 函数可以理解为当 A 使用了 B 时，A **声明**就会调用 B 的 definitionFilter 函数并传入 A 的定义对象让 B 去过滤。

### 分包加载

懒加载

### 组件

1. movable-area、movable-view

- movable-view标签可以在movable-area标签内移动

### 初始缓存

1. 静态初始渲染，直接提前将页面初始 data 的渲染结果展示给用户
2. 动态初始渲染，相当于在初始 data 基础上额外进行一次 setData

### 前台/后台状态

1. 前台
- 小程序启动后，界面被展示给用户，此时小程序处于前台状态。
2. 后台
- 当用户点击右上角胶囊按钮关闭小程序
- 按了设备 Home 键离开微信时，小程序并没有完全终止运行，而是进入了后台状态，小程序还可以运行一小段时间。

> 当用户再次进入微信或再次打开小程序，小程序又会从后台进入前台。但如果用户很久没有再进入小程序，或者系统资源紧张，小程序可能被销毁，即完全终止运行。

### 冷启动/热启动

1. 冷启动，小程序首次打开或者销毁后打开
2. 热启动，小程序并未被销毁，只是从后台状态进入前台状态

### 小程序销毁时机

通常，只有当小程序进入后台一定时间，或者系统资源占用过高，才会被销毁