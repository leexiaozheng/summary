### 接口请求过程

### https 连接过程

1. 客户端发送Client Hello给服务端
    - TLS版本
    - 客户端的当前时间
    - 随机密码串
    - Session ID
    - 浏览器支持的加密组合方式
    - 域名

2. 服务端发送server Hello
    - 时间
    - 随机数
    - Session ID
    - 加密方式(ECDHE,RSA,AES,SHA256)
        * ECDHE：用于生成证书的密钥和公钥
        * RSA：验证证书（对公钥签名）
        * AES：数据传输加密方法，利用主密钥生产另一个密钥
        * SHA256：检验数据是否合法

3. 服务端发送证书

4. 密钥交换 
    - Server Key Exchanger，发送公钥（用客户端的公钥（RSA）签名过的）给客户端，需要客户端的密钥才能解密
    - Client Key Exchanger，利用服务端发送的随机密码生成主密钥，然后发送公钥（用服务端公钥签名过的）给服务端，

5. 服务端确认，会ACK,开始传输数据 

### 证书

1. 服务器的证书有对应的密钥（d,n）和公钥(e,n)，满足这个条件

```javascript
EM = M ^ e % n; //加密：M内容，EM加密结果
M = EM ^ d % n; //解密：EM解密内容，M解密结果
```
2. 服务器发送的证书包含这些信息：

    - 签名：用证书的密钥对被签名的证书做的签名
    - 签名算法：例如RSA + SHA256
    - 被签名的证书（tbsCertificate）
        * 申请时的组织信息
        * 有效期
        * 当前证书的公钥

3. 证书的签名是用证书的密钥对tbsCertificate(被签名的证书)做的加密，并添加了防篡改标识。
4. 签名算法包括对tbsCertificate(被签名的证书）加解密算法和防篡标识计算算法（RSA证书加解密算法，SHA256防篡改计算算法）。
5. 服务器发送的证书的公钥存在被签名的证书信息里面。
6. 客户端收到证书后利用公钥对签名进行解密，并对被签名的证书(tbsCertificate)做防篡改计算，计算结果和解密后的防篡改标识比对，一样则没有被篡改,反之则被篡改。

> 服务端选择的加密方式：ECDHE(),RSA()